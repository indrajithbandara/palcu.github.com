<li>
  {% if post.image %}

    <img src="{{ post.image.src }}" alt="{{ post.image.alt }}" />

  {% else %}

    {% assign foundImage = 0 %}
    {% assign images = post.content | split:"<img " %}

    {% for image in images %}
      {% if image contains 'src' %}
          {% if foundImage == 0 %}
              {% assign html = image | split:"/>" | first %}
              {% assign tags = html | split:" " %}
              {% for tag in tags %}
                {% if tag contains 'src' %}
                  <img {{ tag }} />
                {% endif %}
              {% endfor %}
              {% assign foundImage = 1 %}
          {% endif %}
      {% endif %}
    {% endfor %}

  {% endif %}

  <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
  {% for tag in post.tags %}
    <code class="post-meta"><a href="/tags#{{ tag | slugify }}-ref">{{ tag }}</a></code>
  {% endfor %}

  <h3>
  {% if post.seo_url %}
    <a class="post-link" href="{{ post.seo_url }}">{{ post.title }}</a>
  {% else %}
    <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
  {% endif %}
  </h3>

  {{ post.excerpt | markdownify | strip_html | truncate: include.chars-max }}
</li>
